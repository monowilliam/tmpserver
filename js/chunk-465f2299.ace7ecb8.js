(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-465f2299"],{"005e":function(t,a,i){},1403:function(t,a,i){"use strict";i("005e")},1583:function(t,a){var i={body:'<g fill="currentColor"><path fill-rule="evenodd" d="M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1zm1-3a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2z"/><path fill-rule="evenodd" d="M3.5 0a.5.5 0 0 1 .5.5V1a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 .5-.5zm9 0a.5.5 0 0 1 .5.5V1a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 .5-.5z"/><path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-5 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/></g>',width:16,height:16};a.__esModule=!0,a.default=i},"1c39":function(t,a,i){},"65fc":function(t){t.exports=JSON.parse('[{"id":1,"nombre":"Universitarias Andinas","fechaInicio":"20-08-2020","fechaFin":"30-08-2020","duracion":"11","estado":"1","medios":[{"id":"1","intensidad":2},{"id":"2","intensidad":1},{"id":"3","intensidad":5},{"id":"4","intensidad":5},{"id":"5","intensidad":5}]},{"id":2,"nombre":"Citologías","fechaInicio":"04-09-2020","fechaFin":"30-09-2020","duracion":"27","estado":2,"medios":[{"id":"4","intensidad":5},{"id":"5","intensidad":5}]},{"id":3,"nombre":"Cita médica","fechaInicio":"02-09-2020","fechaFin":"20-09-2020","duracion":"18","estado":3,"medios":[{"id":"5","intensidad":5}]}]')},ea94:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"vx-row",staticStyle:{"padding-bottom":"25px"}},[i("div",{staticClass:"vx-col w-full md:w-1/2 lg:w-1/2 xl:w-1/2"},[i("span",{staticClass:"inline-flex relative"},[i("div",{staticStyle:{"padding-right":"20px"}},[i("vx-card",{},[i("p",[t._v("Estado")])])],1),i("vx-card",{staticStyle:{height:"63px",width:"200px"}},[i("v-select",{staticClass:"mb-4 md:mb-0",staticStyle:{"margin-top":"-6px"},attrs:{options:t.roleOptions,clearable:!1},on:{input:function(a){return t.filtroEstado(t.filtros.estado.value)}},model:{value:t.filtros.estado,callback:function(a){t.$set(t.filtros,"estado",a)},expression:"filtros.estado"}})],1)],1)]),i("div",{staticClass:"vx-col w-full md:w-1/2 lg:w-1/2 xl:w-1/2"},[i("span",{staticClass:"inline-flex relative"},[i("div",{staticStyle:{"padding-right":"20px"}},[i("vx-card",{staticStyle:{width:"151px"}},[i("p",[t._v("Fecha de Inicio")])])],1),i("div",{staticStyle:{"padding-right":"20px"}},[i("vx-card",{staticStyle:{height:"63px"}},[i("span",{staticClass:"inline-flex relative"},[i("IconifyIcon",{attrs:{icon:t.calendarIcon,width:"20"}}),i("flat-pickr",{staticStyle:{"padding-left":"15px","margin-top":"-6px"},attrs:{config:t.configFechaInicio},on:{input:function(a){return t.filtroFechas(t.filtros.fechaInicio,t.filtros.fechaFin)},"on-change":t.onFromChange},model:{value:t.filtros.fechaInicio,callback:function(a){t.$set(t.filtros,"fechaInicio",a)},expression:"filtros.fechaInicio"}})],1)])],1),i("div",{staticStyle:{"padding-right":"20px"}},[i("vx-card",{staticStyle:{height:"63px"}},[i("span",{staticClass:"inline-flex relative"},[i("IconifyIcon",{attrs:{icon:t.calendarIcon,width:"20"}}),i("flat-pickr",{staticStyle:{"padding-left":"15px","margin-top":"-6px"},attrs:{config:t.configFechaFin},on:{input:function(a){return t.filtroFechas(t.filtros.fechaInicio,t.filtros.fechaFin)},"on-change":t.onToChange},model:{value:t.filtros.fechaFin,callback:function(a){t.$set(t.filtros,"fechaFin",a)},expression:"filtros.fechaFin"}})],1)])],1)])])]),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-full"},[i("tabla-listado",{attrs:{datos:t.datos}})],1)])])},e=[],o=i("4a7a"),s=i.n(o),c=i("c38f"),r=i.n(c),d=(i("0952"),function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("vx-card",[i("vs-table",{attrs:{data:t.datos,"max-items":"8",pagination:"",search:"",noDataText:"No hay campañas en tu búsqueda",hoverFlat:""},on:{selected:t.handleSelected},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.data;return 0!=t.datos.length?t._l(n,(function(a,e){return i("vs-tr",{key:e,attrs:{data:a}},[i("vs-td",{attrs:{data:n[e].id}},[t._v("\n\t\t\t\t\t\t"+t._s(n[e].id)+"\n\t\t\t\t\t")]),i("vs-td",{attrs:{data:n[e].nombre}},[t._v("\n\t\t\t\t\t\t"+t._s(n[e].nombre)+"\n\t\t\t\t\t")]),i("vs-td",{attrs:{data:n[e].fechaInicio}},[t._v("\n\t\t\t\t\t\t"+t._s(n[e].fechaInicio)+"\n\t\t\t\t\t")]),i("vs-td",{staticStyle:{"padding-right":"0px"},attrs:{data:n[e].fechaFin}},[t._v("\n\t\t\t\t\t\t"+t._s(n[e].fechaFin)+"\n\t\t\t\t\t")]),i("vs-td",{staticStyle:{"padding-right":"0px","padding-left":"0px"},attrs:{data:n[e].medios}},[i("center",t._l(n[e].medios,(function(a){return i("span",{key:a.id,staticClass:"inline-flex relative"},[i("h3",{staticStyle:{"padding-right":"5px","padding-left":"14px"}},[t._v(t._s(a.intensidad))]),"1"==a.id?i("IconifyIcon",{attrs:{icon:t.iconos.CelularIcon,width:"25"}}):"2"==a.id?i("IconifyIcon",{attrs:{icon:t.iconos.TelefonoIcon,width:"25"}}):"3"==a.id?i("IconifyIcon",{attrs:{icon:t.iconos.EmailIcon,width:"25"}}):"4"==a.id?i("IconifyIcon",{attrs:{icon:t.iconos.SMSIcon,width:"25"}}):"5"==a.id?i("IconifyIcon",{attrs:{icon:t.iconos.WhatsappIcon,width:"25"}}):t._e()],1)})),0)],1),i("vs-td",{staticStyle:{"padding-left":"0px","padding-right":"0px",width:"50px"},attrs:{data:n[e].duracion}},[i("center",[t._v("\n\t\t\t\t\t\t\t"+t._s(n[e].duracion)+" días\n\t\t\t\t\t\t")])],1),i("vs-td",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{data:n[e].estado}},[i("center",[i("span",{staticClass:"inline-flex relative"},[1==n[e].estado?i("span",{staticClass:"p-1 inline-flex rounded-full feather-icon select-none relative text-primary mb-4",staticStyle:{background:"rgba(var(--vs-success),0.15)"}},[i("vs-icon",{attrs:{icon:"mood",size:"25px",color:"success"}}),i("p",{staticStyle:{color:"rgba(var(--vs-success))","font-size":"10px"}},[t._v("Activo")])],1):2==n[e].estado?i("span",{staticClass:"p-1 inline-flex rounded-full feather-icon select-none relative text-primary mb-4",staticStyle:{background:"rgba(var(--vs-warning),0.15)"}},[i("vs-icon",{attrs:{icon:"history",size:"25px",color:"warning"}}),i("p",{staticStyle:{color:"rgba(var(--vs-warning))","font-size":"10px"}},[t._v("Programado")])],1):3==n[e].estado?i("span",{staticClass:"p-1 inline-flex rounded-full feather-icon select-none relative text-primary mb-4",staticStyle:{background:"rgba(var(--vs-danger),0.15)"}},[i("vs-icon",{attrs:{icon:"check_circle",size:"25px",color:"danger"}}),i("p",{staticStyle:{color:"rgba(var(--vs-danger))","font-size":"10px"}},[t._v("Finalizado")])],1):t._e()])])],1),i("vs-td",{staticStyle:{"padding-left":"0px","padding-right":"0px",width:"50px"}},[i("vs-dropdown",[i("vs-button",{attrs:{radius:"",color:"#000000",type:"flat","icon-pack":"feather",icon:"icon-more-vertical"}}),i("vs-dropdown-menu",[1==n[e].estado||2==n[e].estado?i("vs-dropdown-item",{on:{click:function(a){return t.editarCampana(e)}}},[t._v(" Editar ")]):t._e(),1==n[e].estado||2==n[e].estado?i("vs-dropdown-item",{attrs:{divider:""},on:{click:function(a){return t.finalizarCampana(e)}}},[t._v(" Finalizar ")]):t._e(),3==n[e].estado?i("vs-dropdown-item",{attrs:{divider:""}},[t._v(" Estadísticas ")]):t._e()],1)],1)],1)],1)})):void 0}}],null,!0),model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}},[i("template",{slot:"thead"},[i("vs-th",{attrs:{"sort-key":"id"}},[t._v("ID")]),i("vs-th",{attrs:{"sort-key":"campana"}},[t._v("Campaña")]),i("vs-th",{staticStyle:{width:"114px"},attrs:{"sort-key":"fechaIni"}},[t._v("Fecha Inicio")]),i("vs-th",{staticStyle:{width:"98px","padding-right":"0px"},attrs:{"sort-key":"fechaFin"}},[t._v("Fecha Fin")]),i("vs-th",[t._v("Intensidad Diaria por Medios Usados")]),i("vs-th",{staticStyle:{"padding-left":"0px","padding-right":"0px",width:"50px"},attrs:{"sort-key":"duracion"}},[t._v("Duración")]),i("vs-th",[t._v("Estado")]),i("vs-th")],1)],2),0!=t.datos.length?i("vs-prompt",{attrs:{title:"Editar Campaña","accept-text":"Cambiar","cancel-text":"Cancelar","is-valid":t.validName,active:t.modalCambios},on:{cancel:t.cancelarCambios,accept:t.aceptarCambios,close:t.cancelarCambios,"update:active":function(a){t.modalCambios=a}}},[i("div",{staticClass:"con-exemple-prompt"},[t._v("\n\t\t\t\tNombre de la campaña:\n\t\t\t\t"),i("vs-input",{staticClass:"mt-4 mb-2 w-full",attrs:{placeholder:"Nombre de la Campaña"},model:{value:t.datos[t.tmpI].nombre,callback:function(a){t.$set(t.datos[t.tmpI],"nombre",a)},expression:"datos[tmpI].nombre"}}),2==t.datos[t.tmpI].estado?i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-full md:w-1/2 lg:w-1/2 xl:w-1/2"},[i("center",[i("p",{staticClass:"pt-3 pr-3"},[t._v("Fecha de Inicio")]),i("flat-pickr",{attrs:{config:t.configFechaInicio,placeholder:t.datos[t.tmpI].fechaInicio},on:{"on-change":t.onFromChange},model:{value:t.datos[t.tmpI].fechaInicio,callback:function(a){t.$set(t.datos[t.tmpI],"fechaInicio",a)},expression:"datos[tmpI].fechaInicio"}})],1)],1),i("div",{staticClass:"vx-col w-full md:w-1/2 lg:w-1/2 xl:w-1/2"},[i("center",[i("p",{staticClass:"pt-3 pr-3"},[t._v("Fecha Fin")]),i("flat-pickr",{attrs:{config:t.configFechaFin,placeholder:t.datos[t.tmpI].fechaFin},on:{"on-change":t.onToChange},model:{value:t.datos[t.tmpI].fechaFin,callback:function(a){t.$set(t.datos[t.tmpI],"fechaFin",a)},expression:"datos[tmpI].fechaFin"}})],1)],1)]):t._e(),1==t.datos[t.tmpI].estado?i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-full"},[i("center",[i("p",{staticClass:"pt-3 pr-3"},[t._v("Fecha Fin")]),i("flat-pickr",{attrs:{config:t.configFechaFin,placeholder:t.datos[t.tmpI].fechaFin},on:{"on-change":t.onToChange},model:{value:t.datos[t.tmpI].fechaFin,callback:function(a){t.$set(t.datos[t.tmpI],"fechaFin",a)},expression:"datos[tmpI].fechaFin"}})],1)],1)]):t._e()],1)]):t._e(),0!=t.datos.length?i("vs-prompt",{attrs:{title:"Finalizar Campaña","accept-text":"Finalizar Campaña","cancel-text":"Cancelar",active:t.modalFinalizado},on:{cancel:t.cancelarFinalizado,accept:t.confirmarFinalizado,close:t.cancelarFinalizado,"update:active":function(a){t.modalFinalizado=a}}},[i("div",{staticClass:"con-exemple-prompt"},[i("vs-row",[i("center",[i("p",[t._v("¿Estas seguro de finalizar la campaña de "+t._s(t.datos[t.tmpI].nombre)+"?")])])],1)],1)]):t._e()],1)}),l=[],h=i("c850"),f=i("8225"),p=i.n(f),m=i("6560"),u=i.n(m),v=i("62aa"),g=i.n(v),I=i("bc62"),x=i.n(I),F=i("a99d"),b=i.n(F),C=i("c1df"),y=i.n(C),w=i("bc3a"),_=i.n(w),Y={props:["datos"],components:{IconifyIcon:h["a"],flatPickr:r.a},data:function(){return{modalFinalizado:!1,modalCambios:!1,iconos:{CelularIcon:p.a,TelefonoIcon:u.a,EmailIcon:g.a,SMSIcon:x.a,WhatsappIcon:b.a},selected:[],tmpI:0,tmpC:[],tmpA:{nombre:"",fecha1:"",fecha2:""},configFechaInicio:{minDate:new Date,maxDate:null,dateFormat:"d-m-Y"},configFechaFin:{minDate:new Date,dateFormat:"d-m-Y"}}},methods:{editarCampana:function(t){this.modalCambios=!0,this.tmpI=t,this.tmpA.nombre=this.datos[t].nombre,this.tmpA.fechae1=this.datos[t].fechaInicio,this.tmpA.fechae2=this.datos[t].fechaFin},onFromChange:function(t,a,i){this.$set(this.configFechaFin,"minDate",a)},onToChange:function(t,a,i){this.$set(this.configFechaInicio,"maxDate",a)},handleSelected:function(t){this.$vs.notify({title:"Seleccionada Campaña ".concat(t.id),text:"Nombre: ".concat(t.nombre)}),this.$router.push({name:"estadistica",params:{idCampana:t.id}})},aceptarCambios:function(){var t=this,a=this.datos[this.tmpI].id,i=this.datos[this.tmpI].nombre,n=this.datos[this.tmpI].fechaInicio,e=this.datos[this.tmpI].fechaFin,o=y()(this.datos[this.tmpI].fechaFin,"DD-MM-YYYY").diff(y()(this.datos[this.tmpI].fechaInicio,"DD-MM-YYYY"),"days")+1;this.datos[this.tmpI].duracion=o;var s={id:a,nombre:i,fechaInicio:n,fechaFin:e,duracion:String(o)};_.a.put(this.url.actualizarCampanias,s).then((function(a){t.$vs.notify({color:"success",title:"Cambios Guardados"}),t.datos[t.tmpI].duracion=o})).catch((function(a){t.alerta("danger","Ocurrió un error a cargar la DB","Error: "+a),console.error("Error: ",a)}))},cancelarCambios:function(){this.datos[this.tmpI].nombre=this.tmpA.nombre},finalizarCampana:function(t){this.modalFinalizado=!0,this.tmpI=t,this.tmpA.nombre=this.datos[t].nombre,this.tmpA.fechae1=this.datos[t].fechaInicio,this.tmpA.fechae2=this.datos[t].fechaFin},cancelarFinalizado:function(){this.$vs.notify({color:"danger",title:"Finalizada Cancelada"})},confirmarFinalizado:function(){var t=this,a=this.datos[this.tmpI].id,i=String(y()().format("DD-MM-YYYY")),n=y()(i,"DD-MM-YYYY").diff(y()(this.datos[this.tmpI].fechaInicio,"DD-MM-YYYY"),"days")+1;this.datos[this.tmpI].duracion=n,this.datos[this.tmpI].fechaFin=i;var e={id:a,fechaFin:i,duracion:n};_.a.put(this.url.finalizarCampanias,e).then((function(a){t.$vs.notify({color:"success",title:"Campaña Finalizada Correctamente",iconPack:"feather",icon:"icon-check"}),t.datos[t.tmpI].estado="3",t.datos[t.tmpI].fechaFin=String(y()().format("DD-MM-YYYY")),t.datos[t.tmpI].duracion=y()(t.datos[t.tmpI].fechaFin,"DD-MM-YYYY").diff(y()(t.datos[t.tmpI].fechaInicio,"DD-MM-YYYY"),"days")+1})).catch((function(a){console.log(a),t.$vs.notify({color:"danger",title:"Error al Finalizar Campaña",text:"No se pudo finalizar la campaña ".concat(t.tmpA.nombre,". Error: ").concat(a),iconPack:"feather",icon:"icon-alert-circle"})}))}},computed:{validName:function(){return this.datos[this.tmpI].nombre.length>0},url:function(){return this.$store.state.urlsAPI},infoUser:function(){return this.$store.state.loginInfo}}},D=Y,S=(i("f3cc"),i("2877")),k=Object(S["a"])(D,d,l,!1,null,null,null),z=k.exports,M=i("1583"),$=i.n(M),E=i("65fc"),A={components:{vSelect:s.a,flatPickr:r.a,TablaListado:z,IconifyIcon:h["a"]},data:function(){return{datos:E,datos2:E,calendarIcon:$.a,filtros:{fechaInicio:new Date,fechaFin:new Date,estado:{label:"Todos",value:"0"}},configFechaInicio:{minDate:null,maxDate:null,dateFormat:"d-m-Y"},configFechaFin:{minDate:new Date,dateFormat:"d-m-Y"},roleOptions:[{label:"Todos",value:"0"},{label:"Activas",value:"1"},{label:"Programadas",value:"2"},{label:"Finalizadas",value:"3"}]}},methods:{onFromChange:function(t,a,i){this.$set(this.configFechaFin,"minDate",a)},onToChange:function(t,a,i){this.$set(this.configFechaInicio,"maxDate",a)},cargarCampanias:function(){var t=this;_.a.get(this.url.campanias).then((function(a){t.datos=a.data,t.datos2=a.data})).catch((function(a){t.$vs.notify({color:"danger",title:"Error al cargar la Tabla",text:a,iconPack:"feather",icon:"icon-alert-circle"}),console.log(a)}))},filtroEstado:function(t){this.datos=this.datos2,this.datos="1"===t?this.datos.filter((function(t){return"1"==t.estado})):"2"===t?this.datos.filter((function(t){return"2"==t.estado})):"3"===t?this.datos.filter((function(t){return"3"==t.estado})):this.datos2},filtroFechas:function(t,a){this.datos=this.datos2;var i=y()(t,"DD-MM-YYYY").subtract(1,"d"),n=y()(a,"DD-MM-YYYY").add(1,"d");this.datos=this.datos.filter((function(t){return y()(t.fechaInicio,"DD-MM-YYYY").isBetween(i,n)}))}},computed:{url:function(){return this.$store.state.urlsAPI},infoUser:function(){return this.$store.state.loginInfo}},mounted:function(){this.cargarCampanias()}},T=A,P=(i("1403"),Object(S["a"])(T,n,e,!1,null,"5c70663e",null));a["default"]=P.exports},f3cc:function(t,a,i){"use strict";i("1c39")}}]);
//# sourceMappingURL=chunk-465f2299.ace7ecb8.js.map